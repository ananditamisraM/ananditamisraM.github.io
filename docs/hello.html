<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>My Personal Homepage - Data Story Visualizations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">My Personal Homepage</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./UsefulLinks.html" rel="" target="">
 <span class="menu-text">Useful Links</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./hello.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data Story Visualizations</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-glass-ceiling-and-leaky-pipeline-lets-talk-about-the-gender-inequality-in-the-workforce." id="toc-the-glass-ceiling-and-leaky-pipeline-lets-talk-about-the-gender-inequality-in-the-workforce." class="nav-link active" data-scroll-target="#the-glass-ceiling-and-leaky-pipeline-lets-talk-about-the-gender-inequality-in-the-workforce.">The Glass Ceiling and Leaky Pipeline: Let’s talk about the gender inequality in the workforce.</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Story Visualizations</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="the-glass-ceiling-and-leaky-pipeline-lets-talk-about-the-gender-inequality-in-the-workforce." class="level2">
<h2 class="anchored" data-anchor-id="the-glass-ceiling-and-leaky-pipeline-lets-talk-about-the-gender-inequality-in-the-workforce.">The Glass Ceiling and Leaky Pipeline: Let’s talk about the gender inequality in the workforce.</h2>
<section id="lets-define-terms" class="level5">
<h5 class="anchored" data-anchor-id="lets-define-terms">Let’s define terms</h5>
<p>The glass ceiling is a phenomenon that describes the existence of artificial barriers that slow down the growth of women in the workforce. These factors can be inherent such as the will for women to value personal life more than professional life with age, emotional inclination of women, or the social (gender-biased) conditioning such as the need to tend to domestic duties. They can also be external such as the gender pay gap, inequality in the workforce in terms of opportunities or the gender-biased discriminatory attitude of superiors towards their juniors in the field.</p>
<p>The leaky pipeline is a phenomenon that explains why women disappear as they move up the ranks in their respective fields like a leaky pipeline. There are less number of women at the higher ranks of different fields.</p>
</section>
<section id="why-economics" class="level5">
<h5 class="anchored" data-anchor-id="why-economics">Why Economics?</h5>
<p>Although this type of gender gap/inequality exists for other fields as well, the inequality is much stronger for economics than in other social sciences. Most researchers at current do realize that women are underrepresented in STEM fields and thus, required measures are starting to be put in place. There is very slow growth for the same in economics and researchers and the general public at large are not aware of the gap in economics and how slow the change is taking place. The gender gap in economics also indicates some general bias in science since economics unlike other social sciences requires and relies heavily on analytical skills and mathematics and statistics.</p>
<p>It is important to note this gender gap because it is not only for women in the field who endure sexist policies and hostile behaviour but even government policies would be different if more women were involved in the committees who formulated them. Some famous economists even mentioned that “economics is the worst field to be a woman in.”</p>
<p>Hence, the field is mostly dominated by men in terms of faculty members in universities or positions in banks, etc, relative to the overall population and relative to other disciplines.</p>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisram.shinyapps.io/ananditamisramgithub6/">
</iframe>
<section id="what-is-the-change-in-the-share-of-women-all-positions-from-1995-to-2014-in-major-fields" class="level6">
<h6 class="anchored" data-anchor-id="what-is-the-change-in-the-share-of-women-all-positions-from-1995-to-2014-in-major-fields"><em>What is the change in the share of women (all positions) from 1995 to 2014 in major fields?</em></h6>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisram.shinyapps.io/ananditamisramgithub9/">
</iframe>
<p>The above graph shows simply the share of women in different fields- these cover women in institutions like universities, laboratories, organizations, banks, schools, etc. We see from above that the smallest change is seen in the case of Economics and Humanities. We also see that the share of women both in 1995 and 2014 in the case of Economics is the lowest (hence, lower than Humanities in which also there is the smallest change). Business and Management also had about similar share of women in 1995 but it increased for B&amp;M in 2014 but not that much for Economics. Hence, this is why the gender gap in the form of the leaky pipeline and the glass ceiling phenomonen must be studied urgently in the case of Economics.</p>
</section>
<section id="what-is-the-number-of-identified-positions-and-senior-positions-of-women-by-different-types-of-institutions-in-the-field-of-economics" class="level6">
<h6 class="anchored" data-anchor-id="what-is-the-number-of-identified-positions-and-senior-positions-of-women-by-different-types-of-institutions-in-the-field-of-economics"><em>What is the number of identified positions and senior positions of women by different types of institutions in the field of Economics?</em></h6>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisram.shinyapps.io/ananditamisramgithub8/">
</iframe>
<p>This is the first visualization and the simplest one to highlight the leaky pipeline. Senior positions form a very small share of the total identified positions of women in Economics in different institutions. Hence, it shows that since senior positions occupy a very small share, as we go up, we tend to see less women in senior positions</p>
<p align="center">
</p><p><img src="misc.png" alt="Alt text" width="500" height="200"></p>
<p></p>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisram.shinyapps.io/app7/">
</iframe>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisram.shinyapps.io/ananditamisramgithub6/
">
</iframe>
</section>
<section id="what-is-the-difference-in-share-of-women-at-entry-level-fresh-graduates-entering-the-industry-and-senior-level-by-different-world-regions" class="level6">
<h6 class="anchored" data-anchor-id="what-is-the-difference-in-share-of-women-at-entry-level-fresh-graduates-entering-the-industry-and-senior-level-by-different-world-regions"><em>What is the difference in share of women at entry level (fresh graduates entering the industry) and senior level by different world regions?</em></h6>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisra.shinyapps.io/ananditamisramgithub5/">
</iframe>
<p>We see a clear difference from the above line graph between the number of women at entry level and senior level. The slope does not represent anything. However, for discrete values, the reason why a line graph was chosen, was to show the difference in share at entry and senior level. The line of senior level can be clearly seen to be below entry level and if not for a line chart, it would have been difficult to visualize this, say with a bar plot. As compared to the previous chart, this further highlights the leaky pipeline since instead of comparing total positions occupied by women, the visualization directly compares women at entry level and women at senior level. Women at senior level is less than women at entry level since they have been leaked out of the pipeline.</p>
<p>What we also notice here is that, the difference is the largest for the United States + Canada world region group. It is important to further explore this because of the economic position currently held by USA and Canada. There may be specific gender norms, government policies or country-specific confounder that may be causing this. Let’s further explore why is that.</p>
</section>
<section id="do-higher-ranked-institutions-hire-less-women" class="level6">
<h6 class="anchored" data-anchor-id="do-higher-ranked-institutions-hire-less-women"><em>Do higher-ranked institutions hire less women?</em></h6>
<p>Higher ranked institutions may hire less women due to the pressures associated with the uptake of their publication record. Due to this and the burdens of parenthood, women may drop out of the institutions. The stakes are low at entry level since fresh male and female graduates should be having the same research potential. Hence, we must explore the following two expectations to understand if the difference in entry level and senior level share of women in the USA is not because of the greater number of top-ranked institutions in the USA if Expectation 2 turns out to be true.</p>
<p><em>Expectation 1</em>- Higher-ranked institutions hire women at a similar rate as lower-ranked institutions at all levels of seniority. <em>Expectation 2</em>- Higher-ranked institutions hire less women at senior level than at entry level as compared to lower-ranked institutions.</p>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisra.shinyapps.io/ananditamisramgithub4/">
</iframe>
<p>From the above kernel density plots, we see a clear difference in the percentage of women at all levels. At the entry level, the density plot is spread out as compared to “All positions” or “Senior level”, and the peak of the plot for both the rank groups are at almost the same percentage of women at the x-axis. At the Senior level, the density plot peak for the top 119 rank group is more towards the left (lower percentage of women) than the lower ranked institutions which means higher ranked institutions higher less women at the senior level. Notice also that there is a general decrease in spread in both the plots at the senior level, showing less share of women in both type of institutions, further highlighting the leaky pipeline.</p>
</section>
<section id="is-the-ranking-effect-responsible-for-the-larger-difference-in-share-of-women-at-entry-versus-senior-level-in-the-united-states" class="level6">
<h6 class="anchored" data-anchor-id="is-the-ranking-effect-responsible-for-the-larger-difference-in-share-of-women-at-entry-versus-senior-level-in-the-united-states"><em>Is the ranking effect responsible for the larger difference in share of women at entry versus senior level in the United States?</em></h6>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisra.shinyapps.io/ananditamisraMgithub/">
</iframe>
<p>In the above visualization, we have kernel density plots for the percentage of women for two country groups for a closer look between Europe and Great Britain group and the United States of America and Canada group. Within each kernel density plot, we can see the difference between the top 119 ranked institutions and the top 120-238 ranked institutions. For Europe and Great Britain, the peak of the two plots at entry level are almost at the same point. For senior level also, the peak of the two plots are shifted to the left but are almost at the same point on the x-axis. For United States of America and Canada, at the entry level only, we see a stark difference in spread of the plot of the higher vs lower ranked institutions. Lower-ranked institutions higher larger share of women as compared to higher-ranked institutions in US and Canada at the entry level. A very interesting observation comes from the senior level graph- the lower-rank plot is now less spread which is according to the expectation of leaky pipeline but notice the clear difference in alignment of peaks of the two plots. The higher-rank plot is clearly more towards the left as compared to the lower-rank plot which shows that as compared to the Europe+Great Britain country group, at the senior level, higher-rank institutions hire less women as compared to lower-rank institutions in US+Canada. Hence, we see the existence of the previously explained ranking effect in the US+Canada country group. The situation appears to indicate that prestigious institutions in the United States set elevated expectations for their female faculty members not only in senior positions but also at the entry level. This phenomenon could be attributed to cultural distinctions and disparities in hiring practices within the academic job market.</p>
<p align="center">
</p><p><img src="misc2.png" alt="Alt text" width="500" height="200"></p>
<p></p>
</section>
<section id="given-the-existence-of-the-ranking-effect-is-the-lower-share-of-women-in-the-united-states-and-canada-at-the-senior-level-because-of-more-number-of-high-ranked-institutions-in-the-region" class="level6">
<h6 class="anchored" data-anchor-id="given-the-existence-of-the-ranking-effect-is-the-lower-share-of-women-in-the-united-states-and-canada-at-the-senior-level-because-of-more-number-of-high-ranked-institutions-in-the-region"><em>Given the existence of the ranking effect, is the lower share of women in the United States and Canada at the senior level because of more number of high-ranked institutions in the region?</em></h6>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisra.shinyapps.io/ananditamisramgithub1/">
</iframe>
<p>We saw in the previous visualization that ranking effects do exist and are stronger in the United States and Canada, as compared to Europe and Great Britain. But is it because of the more number of the best institutions located in the United States and Canada? According to the above visualization, we can see that US+Canada is better represented for the top ranked institutions (top50, top 100), and as we increase the number of lower-rank institutions to be included in consideration, we see that Europe+Great Britain is better represented (top 238). Hence, the stronger ranking effect in US+Canada can be attributed to the excellence in US+Canada in terms of the existence of more higher-ranked institutions in the region.</p>
</section>
<section id="what-is-the-correlation-between-gender-gap-index-and-the-sharenumber-of-women-in-the-workforce" class="level6">
<h6 class="anchored" data-anchor-id="what-is-the-correlation-between-gender-gap-index-and-the-sharenumber-of-women-in-the-workforce"><em>What is the correlation between gender gap index and the share/number of women in the workforce?</em></h6>
<iframe height="400" width="100%" frameborder="no" src="https://ananditamisra.shinyapps.io/app3/">
</iframe>
<p>We saw that in all countries (in the third visualization), the share of women at entry level is greater than at senior level. From the second visualization, we also saw how the proportion of women at all positions is much higher than at senior positions. We also saw the heterogeneity between the Europe and Great Britain country group and the United States and Canada country group. The differences may be because of the respective features of gender inequality in that country group/region. This is captured by the Global Gender Gap Index provided by the World Economic Forum. The dataset had ranks for each country according to the Global Gender Gap Index and had ranks for the share of women in all positions and senior positions. Now, the above visualization shows the correlation between the gender gap index rank of the countries and the rank of the share of women. There is a 41% correlation in the case of “All positions” and a 58% correlation for senior positions. The difference in the percentage of correlation, particularly the stronger correlation of the gender gap index (reflecting gender inequality values in respecive countries) and the share of women in senior positions, highlights that gender inequality is much more apparent in the case of senior positions, highlighting the leaky pipeline.</p>
</section>
</section>
<section id="overall-story" class="level4">
<h4 class="anchored" data-anchor-id="overall-story">Overall story</h4>
</section>
<section id="i-will-add-the-writeup-for-importance-of-the-story-here-and-why-is-it-interesting-and-how-relevant-it-is.-final-statistics-will-be-added-here-to-create-emphasis." class="level4">
<h4 class="anchored" data-anchor-id="i-will-add-the-writeup-for-importance-of-the-story-here-and-why-is-it-interesting-and-how-relevant-it-is.-final-statistics-will-be-added-here-to-create-emphasis."><em>I will add the writeup for importance of the story here and why is it interesting and how relevant it is. Final statistics will be added here to create emphasis.</em></h4>
<p>In the end, I will also be adding an overarching flowchart with all information summarized similar to what I have on the about page-</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  A[Social conditioning eliminated] --&gt; D(Output)
  B(Gender pay equality) --&gt; D{Output}
  C(More economic opportunities for women) --&gt; D{Output}
  D --&gt; E[Economic growth potential]
  D --&gt; F[Labour efficiency]
</pre>
</div>
</div>
</div>
</div>
<p><em>Economic Growth Potential:</em></p>
<p>According to a report by McKinsey &amp; Company, advancing women’s equality and reducing the gender gap in the workplace could add $12 trillion to global GDP by 2025. There is a lot of potential in women who are getting educated and shifting to the workfield- it is important to recognize and utilize the potential to add to the labor productivity in the economy.</p>
<p><em>Labor Market Efficiency:</em> According to the World Economic Forum’s Global Gender Gap Report 2020, reducing gender disparity in the workplace can improve labor market efficiency, contributing to economic growth. This means that workers should be allocated based on skills, qualifications and merit rather than gender/sex, resulting in more optimum use of human resources. This efficiency will then translate into greater productivity and economic growth, because companies and industries will operate at their full potential.</p>
<p><em>Reducing Income Inequality:</em> The gender pay gap remains a significant issue in all fields. In the United States, women earned about only 82 cents for each dollar earned by men in the year of 2020, according to the U.S. Bureau of Labor Statistics. The glass ceiling and leaky pipeline phenomenon often contribute to this gender wage gap. By addressing these two issues, we can actually work to reduce income inequality. By not holding women back in their careers due to social conditioning, by systemic changes in mindset, they can progress to higher-paying roles and it will have a direct impact on narrowing the gender pay gap.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>